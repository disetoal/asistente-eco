<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Asistente Eco Futurista ‚ôªÔ∏è</title>

  <link rel="stylesheet" href="style.css" />
  <!-- TensorFlow.js y Teachable Machine -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8.4/dist/teachablemachine-image.min.js"></script>
</head>
<body>
  <main class="shell">
    <header class="topbar">
      <h1>‚ôªÔ∏è Asistente Eco ‚Äî Feria</h1>
      <p class="sub">Clasifica residuos y responde preguntas ‚Äî interfaz futurista</p>
    </header>

    <section class="layout">
      <!-- LEFT: C√°mara + Foto -->
      <div class="panel camera-panel">
        <div class="cam-stage">
          <div class="live-wrap">
            <div id="webcam-wrap" class="webcam-wrap">
              <!-- El canvas de tmImage.Webcam se insertar√° aqu√≠ -->
              <div id="webcam-placeholder" class="webcam-placeholder">C√°mara inactiva</div>
            </div>
            <button id="btn-capture" class="btn primary">üì∏ Capturar</button>
          </div>

          <div class="photo-wrap">
            <div class="photo-label">Foto tomada</div>
            <canvas id="photo-canvas" class="photo-canvas" width="640" height="480"></canvas>
            <div id="photo-info" class="photo-info">A√∫n no has tomado una foto.</div>
          </div>
        </div>

        <div class="controls-row">
          <label>Umbral confianza: <span id="th-value">0.70</span></label>
          <input id="threshold" type="range" min="0.5" max="0.95" step="0.01" value="0.70" />
          <button id="btn-start" class="btn">‚ñ∂Ô∏è Iniciar</button>
          <button id="btn-stop" class="btn danger" disabled>‚èπÔ∏è Detener</button>
        </div>
      </div>

      <!-- RIGHT: Avatar + Q&A -->
      <div class="panel assistant-panel">
        <div class="avatar-card">
          <canvas id="avatar-canvas" width="220" height="220" class="avatar-canvas"></canvas>
          <div id="assistant-text" class="assistant-text">Hola ‚Äî coloca un objeto y pulsa "Capturar"</div>
        </div>

        <div class="qa-card">
          <input id="query-input" class="query-input" placeholder="Escribe o pulsa üé§ para preguntar..." />
          <div class="qa-actions">
            <button id="btn-voice" class="btn secondary">üéôÔ∏è</button>
            <button id="btn-ask" class="btn">Enviar</button>
          </div>

          <div class="result-card">
            <div><strong>Clasificaci√≥n:</strong> <span id="result-class">‚Äî</span></div>
            <div><strong>Confianza:</strong> <span id="result-prob">‚Äî</span></div>
            <div id="result-tip" class="result-tip">Consejo aparecer√° aqu√≠.</div>
          </div>
        </div>

        <div class="footer-note">Si usas TV Box con c√°mara USB, aseg√∫rate de permitir permisos de c√°mara en el navegador.</div>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
